<!DOCTYPE html>
<html lang="en" xml:lang="en">

<head>
  <title></title>
  <title>Socket Panel</title>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script> <!-- Sensitive -->
  <script src='https://rawgit.com/abodelot/jquery.json-viewer/master/json-viewer/jquery.json-viewer.js'></script>
  <!-- Sensitive -->
  <link href='https://rawgit.com/abodelot/jquery.json-viewer/master/json-viewer/jquery.json-viewer.css' type='text/css'
    rel='stylesheet' />

  <script src='../node_modules/socket.io/client-dist/socket.io.js'></script>
  <script>
    const socket = io();
    socket.on('connect', function () {
      console.log('connected:->', socket.id);
    });

    socket.on('server-receive-message', function (data) {
      console.log('server-receive-message:->', data);
    });
    socket.on('video-uploaded', function (data) {
      console.log('video-uploaded:->', data);
    });
    socket.on('accept-service', function (data) {
      console.log('accept-service:->', data);
    });
    socket.on('start-service', function (data) {
      console.log('start-service:->', data);
    });
    socket.on('verify-service', function (data) {
      console.log('verify-service:->', data);
    });
    socket.on('end-service', function (data) {
      console.log('end-service:->', data);
    });
    socket.on('start-direction', function (data) {
      console.log('start-direction:->', data);
    });
    socket.on('update-service', function (data) {
      console.log('update-service:->', data);
    });
    socket.on('send-booking-topic', function (data) {
      console.log('send-booking-topic:->', data);
    });
    socket.on('vendor-track-location', function (data) {
      console.log('vendor-track-location:->', data);
    });
    socket.on('booking-receive', function (data) {
      console.log('booking-receive:->', data);
    });
    socket.on('booking-accept', function (data) {
      console.log('booking-accept:->', data);
    });
    socket.on('booking-cancel', function (data) {
      console.log('booking-cancel:->', data);
    });
    socket.on('booking-not-accepted', function (data) {
      console.log('booking-not-accepted:->', data);
    });
    socket.on('unread-notification', function (data) {
      console.log('unread-notification:->', data);
    });

    var messages = {
      'user-connected': {
        userId: "4343534948523557235"
      },
      'send-message': {
        roomId: "4343534948523557235",
        senderId: "sdflj3rtwe55ewete54",
        content: 'This is test message',
      },
      'chat-listing': {
        page: '1',
        limit: '10',
        userId: "sdflj3rtwe55ewete54"
      },
      'chat-history': {
        roomId: "sdflj3rtwe55ewete54",
        userId: "4343534948523557235",
        page: '1',
        limit: '10',
      },
      'vendor-location': {
        vendorId: "sdflj3rtwe55ewete54",
        lat: '1',
        lng: '10',
      },
      'unread': {
        vendorId: "sdflj3rtwe55ewete54",
      },
    };

    function onChange() {
      var address = document.getElementById('address').value;
      var message = messages[address];
      document.getElementById('message').value = JSON.stringify(message);
    }

    function onClickOnSubmit() {
      var key = document.getElementById('address').value || '';
      var message = document.getElementById('message').value || '';

      if (!key || !message) {
        alert('Invalid parameter');
        return;
      }
      let json
      try {
        json = eval('(' + message + ')');
      } catch (e) {
        json = message;
      }

      socket.emit(key, json, function (data) {
        console.log('RESPONSE:->', data);
      });
    }
  </script>
</head>

<body>
  <ul id="chatMessage"></ul>
  <form name="myForm">
    <table>
      <caption></caption>
      <tr>
        <th>
          <label>Key</label>
        </th>
        <td>
          <select id="address" name="address" onchange="onChange()">
            <option value="test">test</option>
            <option value="user-connected">user-connected</option>
            <option value="send-message">send-message</option>
            <option value="chat-listing">chat-listing</option>
            <option value="chat-history">chat-history</option>
            <option value="vendor-location">vendor-location</option>
            <option value="unread">unread</option>
          </select>
        </td>
      </tr>
      <tr>
        <th colspan="2">&nbsp;</th>
      </tr>
      <tr>
        <th>
          <label>Message (string/json)</label>
        </th>
        <td>
          <textarea rows="25" cols="75" id="message"></textarea>
        </td>
      </tr>
      <tr>
        <th>&nbsp;</th>
        <td>
          <input type="button" value="Send" name="" onclick="onClickOnSubmit()" />
        </td>
      </tr>
    </table>
  </form>
  </div>
</body>

</html>